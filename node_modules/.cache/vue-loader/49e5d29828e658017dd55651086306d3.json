{"remainingRequest":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\src\\views\\home\\innovation.vue?vue&type=style&index=0&id=56afceeb&scoped=true&lang=scss","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\src\\views\\home\\innovation.vue","mtime":1688834337112},{"path":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIEBpbXBvcnQgIi4vY3NzL2lubm92YXRpb24uc2NzcyI7DQo="},{"version":3,"sources":["C:\\Users\\DELL\\Desktop\\code\\dt_cup_innovate_ui\\src\\views\\home\\innovation.vue"],"names":[],"mappings":";EAuhBE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"C:/Users/DELL/Desktop/code/dt_cup_innovate_ui/src/views/home/innovation.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div>\r\n    <Header />\r\n    <div class=\"content\" @dragover=\"allowDrop($event, index)\">\r\n      <div class=\"minBg\">\r\n        <img class=\"map\" src=\"./img/minBg2.jpg\" />\r\n      </div>\r\n      <!-- 退出按钮 -->\r\n      <div class=\"img_exit\" @click=\"exit\">\r\n        <img class=\"exit_icon\" src=\"./img/exit_icon.png\" alt=\"\">\r\n        <span class=\"exit_text\">退 &ensp;出</span>\r\n      </div>\r\n      <div>\r\n        <div @click=\"configuration('基站对象开发配置')\" id=\"label_3\" class=\"configuration\">基站对象开发配置</div>\r\n        <div @click=\"configuration('终端对象开发配置')\" style=\"top: 2.1rem\" id=\"label_5\" class=\"configuration\">终端对象开发配置</div>\r\n        <div @click=\"configuration('硬件开发配置')\" style=\"top: 2.9rem\" id=\"label_4\" class=\"configuration\">硬件开发配置</div>\r\n        <div @click=\"configuration('指标呈现')\" style=\"top: 3.7rem\" id=\"label_1\" class=\"configuration\">指标呈现</div>\r\n      </div>\r\n\r\n      <!-- 基站回显 -->\r\n      <div v-show=\"dialog_Visible\" v-for=\"(item, index) in Base_station_echo\" :key=\"index\">\r\n        <img @click=\"\r\n          element(item.serial_number, item.lat, item.lon, item.name, item.type, item.id)\r\n        \" class=\"station_one\"\r\n          :style=\"{ left: this.dispose_station(item.info).left, top: this.dispose_station(item.info).top, }\"\r\n          :src=\"this.dispose_station(item.info).url\" :title=\"this.dispose_station(item.info).name\" />\r\n      </div>\r\n\r\n      <!-- 终端回显 -->\r\n      <div v-show=\"dialog_Visible\" v-for=\"(item, index) in Base_terminal_echo\" :key=\"index\">\r\n        <img @click=\"\r\n          element(item.serial_number, item.lat, item.lon, item.name, item.type, item.id)\r\n        \" class=\"station_one\"\r\n          :style=\"{ left: this.station_terminal(item.info).left, top: this.station_terminal(item.info).top, }\"\r\n          :src=\"this.station_terminal(item.info).url\" :title=\"this.station_terminal(item.info).name\" />\r\n      </div>\r\n\r\n      <div id=\"pop_Box\" v-show=\"dialog_Show\">\r\n        <span style=\"color: #fff; font-size: 0.16rem\">\r\n          <span class=\"map-popup-title\">模型信息</span>\r\n          <span class=\"mars3d-popup-close-button\" @click=\"close\">x</span>\r\n          <table style=\"width: 2.8rem; margin: 0.6rem auto 0\">\r\n            <tbody>\r\n              <tr>\r\n                <td>名称：</td>\r\n                <td id=\"bldianzhanID\">{{ element_name }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>序列号：</td>\r\n                <td id=\"bllng\">{{ element_ID }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>纬度：</td>\r\n                <td id=\"bllat\">{{ latitude }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>经度：</td>\r\n                <td id=\"blarea\">{{ longitude }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>站点类型：</td>\r\n                <td id=\"bldianzhanID\">{{ element_type }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>当前区域：</td>\r\n                <td id=\"bldzlxing\">{{ Scene }}</td>\r\n              </tr>\r\n              <tr v-if=\"element_type === '宏基站'\">\r\n                <td>覆盖半径：</td>\r\n                <td id=\"bldzlxing\">150m</td>\r\n              </tr>\r\n              <tr v-if=\"element_type === '微基站'&&element_ID === '3'\">\r\n                <td>覆盖半径：</td>\r\n                <td id=\"bldzlxing\">55m</td>\r\n              </tr>\r\n              <tr v-if=\"element_type === '视频下载类终端'&&element_ID === '5'\">\r\n                <td>数量：</td>\r\n                <td id=\"bldzlxing\">10台</td>\r\n              </tr>\r\n              <tr v-if=\"element_type === '摄像头'&&element_ID === '2'&&Scene === '小平台'\">\r\n                <td>数量：</td>\r\n                <td id=\"bldzlxing\">2台</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <div class=\"action-btn-container\">\r\n            <button id=\"btnDetailsshanchugrid\" @click=\"remove (this.sole_id, this.element_type)\" class=\"delete\">\r\n              删除\r\n            </button>\r\n          </div>\r\n        </span>\r\n      </div>\r\n\r\n      <!-- 拖拽接收框 -->\r\n      <div class=\"drag_box\" v-show=\"dialog_Visible\">\r\n        <div class=\"header\">\r\n          <span class=\"header_title\">{{ Scene }}</span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <img class=\"Box_map\" :src=\"Box_map\" alt=\"\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"edge\"></div>\r\n      <div class=\"Tabs\">\r\n        <el-tabs :tab-position=\"tabPosition_1\" v-model=\"active_Name\" type=\"card\" @tab-click=\"handle_Click\">\r\n          <el-tab-pane :label=\"item\" :name=\"index\" v-for=\"(item, index) in this.new_Array\" :key=\"index\">\r\n            <div id=\"tabs\">\r\n              <el-tabs :tab-position=\"tabPosition_2\"\r\n                style=\"height: 8.3rem;overflow: auto;margin-left: 2px;background: #302172ad;border-left: 2px solid #fff;\">\r\n                <el-tab-pane label=\"基站库\">\r\n                  <div class=\"element_Box\" v-for=\"(item, index) in picture_list\" :key=\"index\">\r\n                    <div class=\"element\">\r\n                      <img class=\"element_img\" draggable=\"true\" @dragstart=\"dragstart($event, item.name, item.src)\"\r\n                        @dragend=\"dragend($event, item.name, item.type, item.src)\" :src=\"item.src\" alt=\"\" />\r\n                    </div>\r\n                    <p class=\"model-name\">{{ item.name }}</p>\r\n                  </div>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"终端库\">\r\n                  <div class=\"element_Box\" v-for=\"(item, index) in picture_Array\" :key=\"index\">\r\n                    <div class=\"element\">\r\n                      <img class=\"element_img\" draggable=\"true\" @dragstart=\"dragstart($event, item.name, item.src)\"\r\n                        @dragend=\"dragend($event, item.name, item.type, item.src)\" :src=\"item.src\" alt=\"\" />\r\n                    </div>\r\n                    <p class=\"model-name\">{{ item.name }}</p>\r\n                  </div>\r\n                </el-tab-pane>\r\n              </el-tabs>\r\n            </div>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n    </div>\r\n    <Footer></Footer>\r\n  </div>\r\n  <equipment ref=\"equipment\" />\r\n  <hardwareExploit ref=\"hardwareExploit\" />\r\n</template>\r\n\r\n<script>\r\nimport Header from \"./header.vue\";\r\nimport Footer from \"./footer.vue\";\r\nimport equipment from \"@/views/home/equipment.vue\";\r\nimport hardwareExploit from \"@/views/home/hardwareExploit.vue\";\r\nimport { parameter } from \"../../api/apis.js\";\r\nexport default {\r\n  name: \"home\",\r\n  props: {},\r\n  components: {\r\n    Header,\r\n    Footer,\r\n    equipment,\r\n    hardwareExploit\r\n  },\r\n  data() {\r\n    return {\r\n      Arrays: \"\",\r\n      scene_id: \"\",\r\n      active_Name: \"first\",\r\n      new_Array: \"\",\r\n      tabPosition_1: \"left\",\r\n      tabPosition_2: \"top\",\r\n      Base_station_echo: [], //基站回显\r\n      Base_terminal_echo: [], //终端回显\r\n      Map_List: [\r\n        {\r\n          name: \"小平台1\",\r\n          src: require(\"./img/mark_1.jpg\"),\r\n        },\r\n        {\r\n          name: \"智慧校园\",\r\n          src: require(\"./img/mark_2.jpg\"),\r\n        },\r\n        {\r\n          name: \"小平台\",\r\n          src: require(\"./img/mark_3.jpg\"),\r\n        },\r\n        {\r\n          name: \"大平台\",\r\n          src: require(\"./img/mark_4.jpg\"),\r\n        },\r\n        {\r\n          name: \"智慧远程医疗\",\r\n          src: require(\"./img/mark_5.jpg\"),\r\n        },\r\n        {\r\n          name: \"5G智能园区\",\r\n          src: require(\"./img/mark_6.jpg\"),\r\n        },\r\n        {\r\n          name: \"智能家居\",\r\n          src: require(\"./img/mark_7.jpg\"),\r\n        },\r\n        {\r\n          name: \"智能数字电网\",\r\n          src: require(\"./img/mark_8.jpg\"),\r\n        },\r\n        {\r\n          name: \"智能工厂\",\r\n          src: require(\"./img/mark_9.jpg\"),\r\n        },\r\n      ],\r\n      picture_list: [\r\n        {\r\n          name: \"宏基站\",\r\n          type: \"宏基站\",\r\n          src: require(\"./img/Base-station1.png\"),\r\n          url: require(\"./img/Base-station_1.png\"),\r\n        },\r\n        {\r\n          name: \"微基站\",\r\n          type: \"微基站\",\r\n          src: require(\"./img/Base-station2.png\"),\r\n          url: require(\"./img/Base-station_2.png\"),\r\n        },\r\n        {\r\n          name: \"PICO站\",\r\n          type: \"PICO站\",\r\n          src: require(\"./img/Base-station3.png\"),\r\n          url: require(\"./img/Base-station_3.png\"),\r\n        },\r\n      ],\r\n      picture_Array: [\r\n        {\r\n          name: \"移动手持终端\",\r\n          type: \"移动手持终端\",\r\n          src: require(\"./img/terminal1.png\"),\r\n          url: require(\"./img/terminal_1.png\"),\r\n        },\r\n        {\r\n          name: \"车载终端\",\r\n          type: \"车载终端\",\r\n          src: require(\"./img/terminal2.png\"),\r\n          url: require(\"./img/terminal_2.png\"),\r\n        },\r\n        {\r\n          name: \"摄像头\",\r\n          type: \"摄像头\",\r\n          src: require(\"./img/terminal3.png\"),\r\n          url: require(\"./img/terminal_3.png\"),\r\n        },\r\n        {\r\n          name: \"无人机\",\r\n          type: \"无人机\",\r\n          src: require(\"./img/terminal4.png\"),\r\n          url: require(\"./img/terminal_4.png\"),\r\n        },\r\n        {\r\n          name: \"视频下载类终端\",\r\n          type: \"视频下载类终端\",\r\n          src: require(\"./img/terminal5.png\"),\r\n          url: require(\"./img/terminal_5.png\"),\r\n        },\r\n        {\r\n          name: \"智能电表\",\r\n          type: \"智能电表\",\r\n          src: require(\"./img/terminal6.png\"),\r\n          url: require(\"./img/terminal_6.png\"),\r\n        },\r\n        {\r\n          name: \"机器人\",\r\n          type: \"机器人\",\r\n          src: require(\"./img/terminal7.png\"),\r\n          url: require(\"./img/terminal_7.png\"),\r\n        },\r\n        {\r\n          name: \"差动控制保护终端\",\r\n          type: \"差动控制保护终端\",\r\n          src: require(\"./img/terminal8.png\"),\r\n          url: require(\"./img/terminal_8.png\"),\r\n        },\r\n        {\r\n          name: \"传感器\",\r\n          type: \"传感器\",\r\n          src: require(\"./img/terminal9.png\"),\r\n          url: require(\"./img/terminal_9.png\"),\r\n        },\r\n      ],\r\n      base_Array: [],//基站数据传输\r\n      terminal_Array: [],//终端数据传输 \r\n      item: {\r\n        top: \"0\",\r\n        left: \"0\",\r\n      },\r\n      Scene: \"\",//场景名称\r\n      dialog_Visible: false,//弹框显示隐藏\r\n      dialog_Show: false,//弹框显示隐藏\r\n      longitude: null, //经度\r\n      latitude: null, //纬度\r\n      element_name: null, //基站名称\r\n      element_type: null, //基站类型\r\n      quantity: \"1\",//数量\r\n      element_ID: \"1\", //基站ID显示\r\n      Box_map: \"\", //拖拽框底图\r\n      sole_id: \"\",//删除使用唯一id\r\n      parent_id: \"\",//父id\r\n    };\r\n  },\r\n  mounted() {\r\n    // 获取用户选择场景\r\n    this.new_Array = this.$store.state.Scene;\r\n    // 获取场景id\r\n    parameter.Acquire().then((res) => {\r\n      this.Arrays = JSON.parse(res.data);\r\n    });\r\n  },\r\n  methods: {\r\n    // 基站数据处理\r\n    dispose_station(info) {\r\n      let data;\r\n      try {\r\n        data = JSON.parse(info);\r\n      } catch (error) {\r\n        data = {};\r\n      }\r\n      return data;\r\n    },\r\n    // 终端数据处理\r\n    station_terminal(info) {\r\n      let data;\r\n      try {\r\n        data = JSON.parse(info);\r\n      } catch (error) {\r\n        data = {};\r\n      }\r\n      return data;\r\n    },\r\n    // 点击场景名称触发弹框\r\n    handle_Click(tab, event) {\r\n      this.dialog_Visible = false;\r\n      this.Scene = tab.props.label;\r\n      setTimeout(() => {\r\n        this.dialog_Visible = true;\r\n        // 底图显示\r\n        this.Map_List.forEach((e, i) => {\r\n          if (e.name == this.Scene) {\r\n            this.Box_map = e.src;\r\n          }\r\n        });\r\n      }, 1000);\r\n      // 场景id\r\n      this.Arrays.map((item, index) => {\r\n        if (item.name == this.Scene) {\r\n          this.scene_id = item.scene_id;\r\n        }\r\n      });\r\n      this.element_back('基站库');//基站库元素回显\r\n      this.element_back('终端库');//终端库元素回显\r\n      this.structure_back();//元素树结构回显\r\n    },\r\n\r\n    //元素回显\r\n    element_back(type) {\r\n      let dataobj = new FormData();\r\n      dataobj.append(\"scene_id\", this.scene_id);\r\n      dataobj.append(\"element_type\", type);\r\n      parameter.element_select(dataobj).then((res) => {\r\n        this.new_Array.map((item, index) => {\r\n          // latitude纬度 longitude经度\r\n          if (type == '基站库') {\r\n            this.Base_station_echo = JSON.parse(res.data);\r\n          }\r\n          if (type == '终端库') {\r\n            this.Base_terminal_echo = JSON.parse(res.data);\r\n          }\r\n        });\r\n      });\r\n    },\r\n\r\n    //元素树结构回显\r\n    structure_back() {\r\n      let dataobj = new FormData();\r\n      dataobj.append(\"scene_id\", this.scene_id);\r\n      parameter.element_develop(dataobj).then((res) => {\r\n        this.base_Array = JSON.parse(res.data).base_station\r\n        this.terminal_Array = JSON.parse(res.data).terminal\r\n      });\r\n    },\r\n\r\n    // 拖拽开始时\r\n    dragstart(e, name, src) {\r\n      // 拖拽阴影去掉\r\n      document.addEventListener(\r\n        \"dragstart\",\r\n        function (event) {\r\n          event.dataTransfer.setDragImage(\r\n            event.target,\r\n            window.outerWidth,\r\n            window.outerHeight\r\n          );\r\n        },\r\n        false\r\n      );\r\n    },\r\n    // 拖拽完成时\r\n    dragend(e, name, type, src) {\r\n      // 基站拖拽完成\r\n      if (\r\n        this.dialog_Visible == true &&\r\n        e.screenX > 300 &&\r\n        e.screenX < 1660 &&\r\n        e.screenY > 250 &&\r\n        e.screenY < 960\r\n      ) {\r\n        this.picture_list.forEach((item, index) => {\r\n          if (item.name == name) {\r\n            this.item.top = (e.screenY - 120) / 100 + \"rem\";\r\n            this.item.left = (e.screenX - 20) / 100 + \"rem\";\r\n            console.log(this.item)\r\n            let datalist = new FormData();\r\n            datalist.append(\"name\", name);\r\n            datalist.append(\"type\", type);\r\n            datalist.append(\"lon\", e.screenY);\r\n            datalist.append(\"lat\", e.screenX);\r\n            datalist.append(\"scene_id\", this.scene_id);\r\n            datalist.append(\"element_type\", '基站库');\r\n            datalist.append(\"parent_id\", this.parent_id);\r\n            datalist.append(\r\n              \"info\",\r\n              JSON.stringify({\r\n                top: this.item.top,\r\n                left: this.item.left,\r\n                src: src,\r\n                url: item.url,\r\n                type: type,\r\n              })\r\n            );\r\n            //基站添加\r\n            parameter.element_save(datalist).then((res) => {\r\n              this.element_back('基站库');\r\n              this.structure_back()\r\n            });\r\n          }\r\n        });\r\n        //终端拖拽完成\r\n        this.picture_Array.forEach((item, index) => {\r\n          if (item.name == name) {\r\n            this.item.top = (e.screenY - 120) / 100 + \"rem\";\r\n            this.item.left = (e.screenX - 20) / 100 + \"rem\";\r\n            let datalist = new FormData();\r\n            datalist.append(\"name\", name);\r\n            datalist.append(\"type\", type);\r\n            datalist.append(\"lon\", e.screenY);\r\n            datalist.append(\"lat\", e.screenX);\r\n            datalist.append(\"scene_id\", this.scene_id);\r\n            datalist.append(\"element_type\", '终端库');\r\n            datalist.append(\"parent_id\", this.parent_id);\r\n            datalist.append(\r\n              \"info\",\r\n              JSON.stringify({\r\n                top: this.item.top,\r\n                left: this.item.left,\r\n                src: src,\r\n                url: item.url,\r\n                type: type,\r\n              })\r\n            );\r\n            //终端添加\r\n            parameter.element_save(datalist).then((res) => {\r\n              this.element_back('终端库');\r\n              this.structure_back()\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    // 当拖拽到右边框中触发\r\n    allowDrop(e, index) {\r\n      // 触发拖拽默认事件\r\n      e.preventDefault();\r\n    },\r\n    // 点击小图标打开弹框\r\n    element(serial_number, lat, lon, name, type, id) {\r\n      this.dialog_Show = true;\r\n      this.element_name = name;\r\n      this.element_ID = serial_number;\r\n      this.latitude = lat;\r\n      this.longitude = lon;\r\n      this.element_type = type;\r\n      this.sole_id = id;\r\n      \r\n    },\r\n    // 关闭弹框\r\n    close() {\r\n      this.dialog_Show = false;\r\n    },\r\n    // 删除基站\r\n    remove(id, type) {\r\n      if (type == \"宏基站\" || type == \"微基站\" || type == \"PICO站\") {\r\n        let dataobj = new FormData();\r\n        dataobj.append(\"id\", id);\r\n        dataobj.append(\"scene_id\", this.scene_id);\r\n        // 基站删除\r\n        parameter.element_delete(dataobj).then((res) => {\r\n          this.element_back('基站库');\r\n        });\r\n      } else {\r\n        let datalist = new FormData();\r\n        datalist.append(\"id\", id);\r\n        datalist.append(\"scene_id\", this.scene_id);\r\n        // 终端删除\r\n        parameter.element_delete(datalist).then((res) => {\r\n          this.element_back('终端库');\r\n        });\r\n      }\r\n      this.dialog_Show = false;\r\n    },\r\n    // 退出当前页\r\n    exit() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 基站开发配置按钮\r\n    configuration(val) {\r\n      if (val == '基站对象开发配置') {\r\n        if (this.Base_station_echo.length >= 1) {\r\n          this.$refs.equipment.open('基站对象开发配置', this.base_Array, this.Scene);\r\n        } else {\r\n          this.$message.error(\"请至少选择一个基站配置\");\r\n        }\r\n      } else if (val == '终端对象开发配置') {\r\n        if (this.Base_terminal_echo.length >= 1) {\r\n          this.$refs.equipment.open('终端对象开发配置', this.terminal_Array, this.Scene);\r\n        } else {\r\n          this.$message.error(\"请至少选择一个终端配置\");\r\n        }\r\n      } else if (val == '硬件开发配置') {\r\n        this.$refs.hardwareExploit.open('硬件开发配置', this.terminal_Array,);\r\n      } else if (val == '指标呈现') {\r\n        this.$refs.hardwareExploit.open('指标呈现');\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n  @import \"./css/innovation.scss\";\r\n</style>"]}]}